apiVersion: v1
kind: Namespace
metadata:
  name: workflow
  labels:
    app.kubernetes.io/name: activiti7-enterprise-workflow
    app.kubernetes.io/component: namespace
---
# ConfigMap for shared application configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-config
  namespace: workflow
data:
  SPRING_PROFILES_ACTIVE: "kubernetes"

  # PostgreSQL
  DB_HOST: "postgresql"
  DB_PORT: "5432"
  DB_NAME: "workflowdb"

  # RabbitMQ
  RABBITMQ_HOST: "rabbitmq"
  RABBITMQ_PORT: "5672"

  # Redis
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"

  # Elasticsearch
  ELASTICSEARCH_HOST: "elasticsearch"
  ELASTICSEARCH_PORT: "9200"

  # Keycloak
  KEYCLOAK_URL: "http://keycloak:8080"
  KEYCLOAK_REALM: "workflow"

  # MinIO
  MINIO_ENDPOINT: "http://minio:9000"
  MINIO_BUCKET: "workflow-content"

  # Logging
  LOGGING_LEVEL_ROOT: "INFO"
  LOGGING_LEVEL_COM_ENTERPRISE: "DEBUG"
---
# Secret for sensitive configuration
apiVersion: v1
kind: Secret
metadata:
  name: workflow-secrets
  namespace: workflow
type: Opaque
stringData:
  DB_USERNAME: "workflow"
  DB_PASSWORD: "workflow123"
  RABBITMQ_USERNAME: "workflow"
  RABBITMQ_PASSWORD: "workflow123"
  MINIO_ACCESS_KEY: "workflow"
  MINIO_SECRET_KEY: "workflow123"
  KEYCLOAK_CLIENT_SECRET: "workflow-client-secret"
